!function($,e,t,i){"use strict";$.fn.shape=function(n){var a=$(this),o=$("body"),r=(new Date).getTime(),s=[],d=arguments[0],l="string"==typeof d,u=[].slice.call(arguments,1),c=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,0)},g;return a.each(function(){var e=a.selector||"",o=$.isPlainObject(n)?$.extend(!0,{},$.fn.shape.settings,n):$.extend({},$.fn.shape.settings),f=o.namespace,m=o.selector,p=o.error,v=o.className,h="."+f,b="module-"+f,x=$(this),y=x.find(m.sides),S=x.find(m.side),w=!1,z,C,W=this,H=x.data(b),T;T={initialize:function(){T.verbose("Initializing module for",W),T.set.defaultSide(),T.instantiate()},instantiate:function(){T.verbose("Storing instance of module",T),H=T,x.data(b,H)},destroy:function(){T.verbose("Destroying previous module for",W),x.removeData(b).off(h)},refresh:function(){T.verbose("Refreshing selector cache for",W),x=$(W),y=$(this).find(m.shape),S=$(this).find(m.side)},repaint:function(){T.verbose("Forcing repaint event");var e=y[0]||t.createElement("div"),i=e.offsetWidth},animate:function(e,t){T.verbose("Animating box with properties",e),t=t||function(e){T.verbose("Executing animation callback"),e!==i&&e.stopPropagation(),T.reset(),T.set.active()},o.beforeChange.call(C[0]),T.get.transitionEvent()?(T.verbose("Starting CSS animation"),x.addClass(v.animating),y.css(e).one(T.get.transitionEvent(),t),T.set.duration(o.duration),c(function(){x.addClass(v.animating),z.addClass(v.hidden)})):t()},queue:function(e){T.debug("Queueing animation of",e),y.one(T.get.transitionEvent(),function(){T.debug("Executing queued animation"),setTimeout(function(){x.shape(e)},0)})},reset:function(){T.verbose("Animating states reset"),x.removeClass(v.animating).attr("style","").removeAttr("style"),y.attr("style","").removeAttr("style"),S.attr("style","").removeAttr("style").removeClass(v.hidden),C.removeClass(v.animating).attr("style","").removeAttr("style")},is:{complete:function(){return S.filter("."+v.active)[0]==C[0]},animating:function(){return x.hasClass(v.animating)}},set:{defaultSide:function(){z=x.find("."+o.className.active),C=z.next(m.side).length>0?z.next(m.side):x.find(m.side).first(),w=!1,T.verbose("Active side set to",z),T.verbose("Next side set to",C)},duration:function(e){e=e||o.duration,e="number"==typeof e?e+"ms":e,T.verbose("Setting animation duration",e),(o.duration||0===o.duration)&&y.add(S).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=x.find("."+o.className.active),t=e.outerWidth(!0),i=e.outerHeight(!0);x.css({width:t,height:i})},stageSize:function(){var e=x.clone().addClass(v.loading),t=e.find("."+o.className.active),i=w?e.find(m.side).eq(w):t.next(m.side).length>0?t.next(m.side):e.find(m.side).first(),n={};T.set.currentStageSize(),t.removeClass(v.active),i.addClass(v.active),e.insertAfter(x),n={width:i.outerWidth(!0),height:i.outerHeight(!0)},e.remove(),x.css(n),T.verbose("Resizing stage to fit new content",n)},nextSide:function(e){w=e,C=S.filter(e),w=S.index(C),0===C.length&&(T.set.defaultSide(),T.error(p.side)),T.verbose("Next side manually set to",C)},active:function(){T.verbose("Setting new side to active",C),S.removeClass(v.active),C.addClass(v.active),o.onChange.call(C[0]),T.set.defaultSide()}},flip:{up:function(){return!T.is.complete()||T.is.animating()||o.allowRepeats?void(T.is.animating()?T.queue("flip up"):(T.debug("Flipping up",C),T.set.stageSize(),T.stage.above(),T.animate(T.get.transform.up()))):void T.debug("Side already visible",C)},down:function(){return!T.is.complete()||T.is.animating()||o.allowRepeats?void(T.is.animating()?T.queue("flip down"):(T.debug("Flipping down",C),T.set.stageSize(),T.stage.below(),T.animate(T.get.transform.down()))):void T.debug("Side already visible",C)},left:function(){return!T.is.complete()||T.is.animating()||o.allowRepeats?void(T.is.animating()?T.queue("flip left"):(T.debug("Flipping left",C),T.set.stageSize(),T.stage.left(),T.animate(T.get.transform.left()))):void T.debug("Side already visible",C)},right:function(){return!T.is.complete()||T.is.animating()||o.allowRepeats?void(T.is.animating()?T.queue("flip right"):(T.debug("Flipping right",C),T.set.stageSize(),T.stage.right(),T.animate(T.get.transform.right()))):void T.debug("Side already visible",C)},over:function(){return!T.is.complete()||T.is.animating()||o.allowRepeats?void(T.is.animating()?T.queue("flip over"):(T.debug("Flipping over",C),T.set.stageSize(),T.stage.behind(),T.animate(T.get.transform.over()))):void T.debug("Side already visible",C)},back:function(){return!T.is.complete()||T.is.animating()||o.allowRepeats?void(T.is.animating()?T.queue("flip back"):(T.debug("Flipping back",C),T.set.stageSize(),T.stage.behind(),T.animate(T.get.transform.back()))):void T.debug("Side already visible",C)}},get:{transform:{up:function(){var e={y:-((z.outerHeight(!0)-C.outerHeight(!0))/2),z:-(z.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(-90deg)"}},down:function(){var e={y:-((z.outerHeight(!0)-C.outerHeight(!0))/2),z:-(z.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(90deg)"}},left:function(){var e={x:-((z.outerWidth(!0)-C.outerWidth(!0))/2),z:-(z.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(90deg)"}},right:function(){var e={x:-((z.outerWidth(!0)-C.outerWidth(!0))/2),z:-(z.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(-90deg)"}},over:function(){var e={x:-((z.outerWidth(!0)-C.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(180deg)"}},back:function(){var e={x:-((z.outerWidth(!0)-C.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e=t.createElement("element"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},a;for(a in n)if(e.style[a]!==i)return n[a]},nextSide:function(){return z.next(m.side).length>0?z.next(m.side):x.find(m.side).first()}},stage:{above:function(){var e={origin:(z.outerHeight(!0)-C.outerHeight(!0))/2,depth:{active:C.outerHeight(!0)/2,next:z.outerHeight(!0)/2}};T.verbose("Setting the initial animation position as above",C,e),y.css({transform:"translateZ(-"+e.depth.active+"px)"}),z.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),C.addClass(v.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(z.outerHeight(!0)-C.outerHeight(!0))/2,depth:{active:C.outerHeight(!0)/2,next:z.outerHeight(!0)/2}};T.verbose("Setting the initial animation position as below",C,e),y.css({transform:"translateZ(-"+e.depth.active+"px)"}),z.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),C.addClass(v.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e={active:z.outerWidth(!0),next:C.outerWidth(!0)},t={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};T.verbose("Setting the initial animation position as left",C,t),y.css({transform:"translateZ(-"+t.depth.active+"px)"}),z.css({transform:"rotateY(0deg) translateZ("+t.depth.active+"px)"}),C.addClass(v.animating).css({left:t.origin+"px",transform:"rotateY(-90deg) translateZ("+t.depth.next+"px)"})},right:function(){var e={active:z.outerWidth(!0),next:C.outerWidth(!0)},t={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};T.verbose("Setting the initial animation position as left",C,t),y.css({transform:"translateZ(-"+t.depth.active+"px)"}),z.css({transform:"rotateY(0deg) translateZ("+t.depth.active+"px)"}),C.addClass(v.animating).css({left:t.origin+"px",transform:"rotateY(90deg) translateZ("+t.depth.next+"px)"})},behind:function(){var e={active:z.outerWidth(!0),next:C.outerWidth(!0)},t={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};T.verbose("Setting the initial animation position as behind",C,t),z.css({transform:"rotateY(0deg)"}),C.addClass(v.animating).css({left:t.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(e,t){if(T.debug("Changing setting",e,t),$.isPlainObject(e))$.extend(!0,o,e);else{if(t===i)return o[e];o[e]=t}},internal:function(e,t){if($.isPlainObject(e))$.extend(!0,T,e);else{if(t===i)return T[e];T[e]=t}},debug:function(){o.debug&&(o.performance?T.performance.log(arguments):(T.debug=Function.prototype.bind.call(console.info,console,o.name+":"),T.debug.apply(console,arguments)))},verbose:function(){o.verbose&&o.debug&&(o.performance?T.performance.log(arguments):(T.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),T.verbose.apply(console,arguments)))},error:function(){T.error=Function.prototype.bind.call(console.error,console,o.name+":"),T.error.apply(console,arguments)},performance:{log:function(e){var t,i,n;o.performance&&(t=(new Date).getTime(),n=r||t,i=t-n,r=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:W,"Execution Time":i})),clearTimeout(T.performance.timer),T.performance.timer=setTimeout(T.performance.display,500)},display:function(){var t=o.name+":",n=0;r=!1,clearTimeout(T.performance.timer),$.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",e&&(t+=" '"+e+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):$.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(e,t,n){var a=H,o,r,s;return t=t||u,n=W||n,"string"==typeof e&&a!==i&&(e=e.split(/[\. ]/),o=e.length-1,$.each(e,function(t,n){var s=t!=o?n+e[t+1].charAt(0).toUpperCase()+e[t+1].slice(1):e;if($.isPlainObject(a[s])&&t!=o)a=a[s];else{if(a[s]!==i)return r=a[s],!1;if(!$.isPlainObject(a[n])||t==o)return a[n]!==i?(r=a[n],!1):!1;a=a[n]}})),$.isFunction(r)?s=r.apply(n,t):r!==i&&(s=r),$.isArray(g)?g.push(s):g!==i?g=[g,s]:s!==i&&(g=s),r}},l?(H===i&&T.initialize(),T.invoke(d)):(H!==i&&H.invoke("destroy"),T.initialize())}),g!==i?g:this},$.fn.shape.settings={name:"Shape",debug:!1,verbose:!1,performance:!0,namespace:"shape",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,window,document);
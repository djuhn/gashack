!function($,e,n,t){"use strict";$.fn.rating=function(e){var n=$(this),i=n.selector||"",a=(new Date).getTime(),o=[],r=arguments[0],s="string"==typeof r,l=[].slice.call(arguments,1),c;return n.each(function(){var u=$.isPlainObject(e)?$.extend(!0,{},$.fn.rating.settings,e):$.extend({},$.fn.rating.settings),g=u.namespace,d=u.className,m=u.metadata,f=u.selector,v=u.error,p="."+g,b="module-"+g,h=this,y=$(this).data(b),x=$(this),R=x.find(f.icon),C;C={initialize:function(){C.verbose("Initializing rating module",u),0===R.length&&C.setup.layout(),u.interactive?C.enable():C.disable(),C.set.rating(C.get.initialRating()),C.instantiate()},instantiate:function(){C.verbose("Instantiating module",u),y=C,x.data(b,C)},destroy:function(){C.verbose("Destroying previous instance",y),C.remove.events(),x.removeData(b)},refresh:function(){R=x.find(f.icon)},setup:{layout:function(){var e=C.get.maxRating(),n=$.fn.rating.settings.templates.icon(e);C.debug("Generating icon html dynamically"),x.html(n),C.refresh()}},event:{mouseenter:function(){var e=$(this);e.nextAll().removeClass(d.selected),x.addClass(d.selected),e.addClass(d.selected).prevAll().addClass(d.selected)},mouseleave:function(){x.removeClass(d.selected),R.removeClass(d.selected)},click:function(){var e=$(this),n=C.get.rating(),t=R.index(e)+1,i="auto"==u.clearable?1===R.length:u.clearable;i&&n==t?C.clearRating():C.set.rating(t)}},clearRating:function(){C.debug("Clearing current rating"),C.set.rating(0)},bind:{events:function(){C.verbose("Binding events"),x.on("mouseenter"+p,f.icon,C.event.mouseenter).on("mouseleave"+p,f.icon,C.event.mouseleave).on("click"+p,f.icon,C.event.click)}},remove:{events:function(){C.verbose("Removing events"),x.off(p)}},enable:function(){C.debug("Setting rating to interactive mode"),C.bind.events(),x.removeClass(d.disabled)},disable:function(){C.debug("Setting rating to read-only mode"),C.remove.events(),x.addClass(d.disabled)},get:{initialRating:function(){return x.data(m.rating)!==t?(x.removeData(m.rating),x.data(m.rating)):u.initialRating},maxRating:function(){return x.data(m.maxRating)!==t?(x.removeData(m.maxRating),x.data(m.maxRating)):u.maxRating},rating:function(){var e=R.filter("."+d.active).length;return C.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var n=e-1>=0?e-1:0,t=R.eq(n);x.removeClass(d.selected),R.removeClass(d.selected).removeClass(d.active),e>0&&(C.verbose("Setting current rating to",e),t.prevAll().andSelf().addClass(d.active)),u.onRate.call(h,e)}},setting:function(e,n){if(C.debug("Changing setting",e,n),$.isPlainObject(e))$.extend(!0,u,e);else{if(n===t)return u[e];u[e]=n}},internal:function(e,n){if($.isPlainObject(e))$.extend(!0,C,e);else{if(n===t)return C[e];C[e]=n}},debug:function(){u.debug&&(u.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,u.name+":"),C.debug.apply(console,arguments)))},verbose:function(){u.verbose&&u.debug&&(u.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),C.verbose.apply(console,arguments)))},error:function(){C.error=Function.prototype.bind.call(console.error,console,u.name+":"),C.error.apply(console,arguments)},performance:{log:function(e){var n,t,i;u.performance&&(n=(new Date).getTime(),i=a||n,t=n-i,a=n,o.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:h,"Execution Time":t})),clearTimeout(C.performance.timer),C.performance.timer=setTimeout(C.performance.display,500)},display:function(){var e=u.name+":",r=0;a=!1,clearTimeout(C.performance.timer),$.each(o,function(e,n){r+=n["Execution Time"]}),e+=" "+r+"ms",i&&(e+=" '"+i+"'"),n.length>1&&(e+=" ("+n.length+")"),(console.group!==t||console.table!==t)&&o.length>0&&(console.groupCollapsed(e),console.table?console.table(o):$.each(o,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),o=[]}},invoke:function(e,n,i){var a=y,o,r,s;return n=n||l,i=h||i,"string"==typeof e&&a!==t&&(e=e.split(/[\. ]/),o=e.length-1,$.each(e,function(n,i){var s=n!=o?i+e[n+1].charAt(0).toUpperCase()+e[n+1].slice(1):e;if($.isPlainObject(a[s])&&n!=o)a=a[s];else{if(a[s]!==t)return r=a[s],!1;if(!$.isPlainObject(a[i])||n==o)return a[i]!==t?(r=a[i],!1):!1;a=a[i]}})),$.isFunction(r)?s=r.apply(i,n):r!==t&&(s=r),$.isArray(c)?c.push(s):c!==t?c=[c,s]:s!==t&&(c=s),r}},s?(y===t&&C.initialize(),C.invoke(r)):(y!==t&&y.invoke("destroy"),C.initialize())}),c!==t?c:this},$.fn.rating.settings={name:"Rating",namespace:"rating",debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var n=1,t="";e>=n;)t+='<i class="icon"></i>',n++;return t}}}}(jQuery,window,document);
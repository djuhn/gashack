!function($,e,t,n){"use strict";$.fn.progress=function(e){var r=$(this),a=r.selector||"",o=(new Date).getTime(),i=[],s=arguments[0],c="string"==typeof s,l=[].slice.call(arguments,1),u;return r.each(function(){var r=$.isPlainObject(e)?$.extend(!0,{},$.fn.progress.settings,e):$.extend({},$.fn.progress.settings),g=r.className,v=r.metadata,p=r.namespace,d=r.selector,m=r.error,b="."+p,f="module-"+p,h=$(this),w=$(this).find(d.bar),x=$(this).find(d.progress),y=$(this).find(d.label),C=this,T=h.data(f),E=!1,A,S;S={initialize:function(){S.debug("Initializing progress bar",r),S.set.duration(),S.set.transitionEvent(),S.read.metadata(),S.read.settings(),S.instantiate()},instantiate:function(){S.verbose("Storing instance of progress",S),T=S,h.data(f,S)},destroy:function(){S.verbose("Destroying previous progress for",h),clearInterval(T.interval),S.remove.state(),h.removeData(f),T=n},reset:function(){S.set.percent(0),S.set.value(0)},complete:function(){(S.percent===n||S.percent<100)&&S.set.percent(100)},read:{metadata:function(){var e={percent:h.data(v.percent),total:h.data(v.total),value:h.data(v.value)};e.percent&&(S.debug("Current percent value set from metadata",e.percent),S.set.percent(e.percent)),e.total&&(S.debug("Total value set from metadata",e.total),S.set.total(e.total)),e.value&&(S.debug("Current value set from metadata",e.value),S.set.value(e.value),S.set.progress(e.value))},settings:function(){r.total!==!1&&(S.debug("Current total set in settings",r.total),S.set.total(r.total)),r.value!==!1&&(S.debug("Current value set in settings",r.value),S.set.value(r.value),S.set.progress(S.value)),r.percent!==!1&&(S.debug("Current percent set in settings",r.percent),S.set.percent(r.percent))}},increment:function(e){var t,n,r;S.has.total()?(n=S.get.value(),e=e||1,r=n+e,t=S.get.total(),S.debug("Incrementing value",n,r,t),r>t&&(S.debug("Value cannot increment above total",t),r=t)):(n=S.get.percent(),e=e||S.get.randomValue(),r=n+e,t=100,S.debug("Incrementing percentage by",n,r),r>t&&(S.debug("Value cannot increment above 100 percent"),r=t)),S.set.progress(r)},decrement:function(e){var t=S.get.total(),n,r;t?(n=S.get.value(),e=e||1,r=n-e,S.debug("Decrementing value by",e,n)):(n=S.get.percent(),e=e||S.get.randomValue(),r=n-e,S.debug("Decrementing percentage by",e,n)),0>r&&(S.debug("Value cannot decrement below 0"),r=0),S.set.progress(r)},has:{total:function(){return S.get.total()!==!1}},get:{text:function(e){var t=S.value||0,n=S.total||0,r=E?S.get.displayPercent():S.percent||0,a=S.total>0?n-t:100-r;return e=e||"",e=e.replace("{value}",t).replace("{total}",n).replace("{left}",a).replace("{percent}",r),S.debug("Adding variables to progress bar text",e),e},randomValue:function(){return S.debug("Generating random increment percentage"),Math.floor(Math.random()*r.random.max+r.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")?+e.replace(/[^\d.]/g,""):!1:e},transitionEnd:function(){var e=t.createElement("element"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},a;for(a in r)if(e.style[a]!==n)return r[a]},displayPercent:function(){var e=w.width(),t=h.width(),n=parseInt(w.css("min-width"),10),a=e>n?e/t*100:S.percent;return r.precision>0?Math.round(a*(10*r.precision))/(10*r.precision):Math.round(a)},percent:function(){return S.percent||0},value:function(){return S.value||0},total:function(){return S.total||!1}},is:{success:function(){return h.hasClass(g.success)},warning:function(){return h.hasClass(g.warning)},error:function(){return h.hasClass(g.error)},active:function(){return h.hasClass(g.active)},visible:function(){return h.is(":visible")}},remove:{state:function(){S.verbose("Removing stored state"),delete S.total,delete S.percent,delete S.value},active:function(){S.verbose("Removing active state"),h.removeClass(g.active)},success:function(){S.verbose("Removing success state"),h.removeClass(g.success)},warning:function(){S.verbose("Removing warning state"),h.removeClass(g.warning)},error:function(){S.verbose("Removing error state"),h.removeClass(g.error)}},set:{barWidth:function(e){e>100?S.error(m.tooHigh,e):0>e?S.error(m.tooLow,e):(w.css("width",e+"%"),h.attr("data-percent",parseInt(e,10)))},duration:function(e){e=e||r.duration,e="number"==typeof e?e+"ms":e,S.verbose("Setting progress bar transition duration",e),w.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=r.precision>0?Math.round(e*(10*r.precision))/(10*r.precision):Math.round(e),S.percent=e,S.has.total()||(S.value=r.precision>0?Math.round(e/100*S.total*(10*r.precision))/(10*r.precision):Math.round(e/100*S.total*10)/10,r.limitValues&&(S.value=S.value>100?100:S.value<0?0:S.value)),S.set.barWidth(e),S.set.labelInterval(),S.set.labels(),r.onChange.call(C,e,S.value,S.total)},labelInterval:function(){var e=function(){S.verbose("Bar finished animating, removing continuous label updates"),clearInterval(S.interval),E=!1,S.set.labels()};clearInterval(S.interval),w.one(A+b,e),S.timer=setTimeout(e,r.duration+100),E=!0,S.interval=setInterval(S.set.labels,r.framerate)},labels:function(){S.verbose("Setting both bar progress and outer label text"),S.set.barLabel(),S.set.state()},label:function(e){e=e||"",e&&(e=S.get.text(e),S.debug("Setting label to text",e),y.text(e))},state:function(e){e=e!==n?e:S.percent,100===e?!r.autoSuccess||S.is.warning()||S.is.error()?(S.verbose("Reached 100% removing active state"),S.remove.active()):(S.set.success(),S.debug("Automatically triggering success at 100%")):e>0?(S.verbose("Adjusting active progress bar label",e),S.set.active()):(S.remove.active(),S.set.label(r.text.active))},barLabel:function(e){e!==n?x.text(S.get.text(e)):"ratio"==r.label&&S.total?(S.debug("Adding ratio to bar label"),x.text(S.get.text(r.text.ratio))):"percent"==r.label&&(S.debug("Adding percentage to bar label"),x.text(S.get.text(r.text.percent)))},active:function(e){e=e||r.text.active,S.debug("Setting active state"),r.showActivity&&!S.is.active()&&h.addClass(g.active),S.remove.warning(),S.remove.error(),S.remove.success(),e&&S.set.label(e),r.onActive.call(C,S.value,S.total)},success:function(e){e=e||r.text.success,S.debug("Setting success state"),h.addClass(g.success),S.remove.active(),S.remove.warning(),S.remove.error(),S.complete(),e&&S.set.label(e),r.onSuccess.call(C,S.total)},warning:function(e){e=e||r.text.warning,S.debug("Setting warning state"),h.addClass(g.warning),S.remove.active(),S.remove.success(),S.remove.error(),S.complete(),e&&S.set.label(e),r.onWarning.call(C,S.value,S.total)},error:function(e){e=e||r.text.error,S.debug("Setting error state"),h.addClass(g.error),S.remove.active(),S.remove.success(),S.remove.warning(),S.complete(),e&&S.set.label(e),r.onError.call(C,S.value,S.total)},transitionEvent:function(){A=S.get.transitionEnd()},total:function(e){S.total=e},value:function(e){S.value=e},progress:function(e){var t=S.get.numericValue(e),n;t===!1&&S.error(m.nonNumeric,e),S.has.total()?(S.set.value(t),n=t/S.total*100,S.debug("Calculating percent complete from total",n),S.set.percent(n)):(n=t,S.debug("Setting value to exact percentage value",n),S.set.percent(n))}},setting:function(e,t){if(S.debug("Changing setting",e,t),$.isPlainObject(e))$.extend(!0,r,e);else{if(t===n)return r[e];r[e]=t}},internal:function(e,t){if($.isPlainObject(e))$.extend(!0,S,e);else{if(t===n)return S[e];S[e]=t}},debug:function(){r.debug&&(r.performance?S.performance.log(arguments):(S.debug=Function.prototype.bind.call(console.info,console,r.name+":"),S.debug.apply(console,arguments)))},verbose:function(){r.verbose&&r.debug&&(r.performance?S.performance.log(arguments):(S.verbose=Function.prototype.bind.call(console.info,console,r.name+":"),S.verbose.apply(console,arguments)))},error:function(){S.error=Function.prototype.bind.call(console.error,console,r.name+":"),S.error.apply(console,arguments)},performance:{log:function(e){var t,n,a;r.performance&&(t=(new Date).getTime(),a=o||t,n=t-a,o=t,i.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:C,"Execution Time":n})),clearTimeout(S.performance.timer),S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var e=r.name+":",t=0;o=!1,clearTimeout(S.performance.timer),$.each(i,function(e,n){t+=n["Execution Time"]}),e+=" "+t+"ms",a&&(e+=" '"+a+"'"),(console.group!==n||console.table!==n)&&i.length>0&&(console.groupCollapsed(e),console.table?console.table(i):$.each(i,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),i=[]}},invoke:function(e,t,r){var a=T,o,i,s;return t=t||l,r=C||r,"string"==typeof e&&a!==n&&(e=e.split(/[\. ]/),o=e.length-1,$.each(e,function(t,r){var s=t!=o?r+e[t+1].charAt(0).toUpperCase()+e[t+1].slice(1):e;if($.isPlainObject(a[s])&&t!=o)a=a[s];else{if(a[s]!==n)return i=a[s],!1;if(!$.isPlainObject(a[r])||t==o)return a[r]!==n?(i=a[r],!1):(S.error(m.method,e),!1);a=a[r]}})),$.isFunction(i)?s=i.apply(r,t):i!==n&&(s=i),$.isArray(u)?u.push(s):u!==n?u=[u,s]:s!==n&&(u=s),i}},c?(T===n&&S.initialize(),S.invoke(s)):(T!==n&&T.invoke("destroy"),S.initialize())}),u!==n?u:this},$.fn.progress.settings={name:"Progress",namespace:"progress",debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(jQuery,window,document);